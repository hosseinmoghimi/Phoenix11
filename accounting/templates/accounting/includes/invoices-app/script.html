<script>
    let invoices_app_invoices = JSON.parse(`{{invoices_s|escapejs}}`)
    let invoices_app = new Vue({
        el: "#invoices-app",
        data: {
            invoices: invoices_app_invoices,
            search_for: '',
            waiting: false,

        },
        methods: {
            
      copy_to_clipboard:function(code){
                navigator.clipboard.writeText(code);
                 
            },

            filter: function () {
                this.invoices = invoices_app_invoices.filter(function (invoice) {

                    if (invoice.title.indexOf(this.search_for) > -1)
                        return true
                    if (invoice.bedehkar.full_name.indexOf(this.search_for) > -1)
                        return true
                    if (invoice.bestankar.full_name.indexOf(this.search_for) > -1)
                        return true
                    return false

                })
            },
            to_price_colored: function (vall) {
                let CURRENCY="{{CURRENCY}}"
                return to_price_colored(vall, CURRENCY)
            },
            to_price: function (vall) {
                let CURRENCY="{{CURRENCY}}"
                return to_price(vall, CURRENCY)
            },

        }
    })
</script>